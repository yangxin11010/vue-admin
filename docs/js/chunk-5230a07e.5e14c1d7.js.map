{"version":3,"sources":["webpack:///./src/views/system/system.vue","webpack:///./src/views/system/system.vue?f0ea","webpack:///./src/views/system/system.vue?012e","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/util/storage/index.ts","webpack:///./src/plugins/mitt.ts","webpack:///./src/hooks/index.ts","webpack:///./src/util/validata/index.ts"],"names":["class","type","clickHandle","input","style","name","setup","render","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","storageType","this","storage","JSON","parse","getItem","value","setItem","stringify","removeItem","session","sessionStorage","localStorage","emitter","$emit","emit","$on","on","$off","off","useLocation","options","refValue","isWatch","deep","locationValue","usePageUpdate","route","watchUpdate","meta","keepAlive","linkReg","emailReg","checkLink","val","test","checkEmail","isObject","toString","call"],"mappings":"6JACSA,MAAM,U,iBACwC,S,+GADnD,eAGM,MAHN,EAGM,CAFF,eAAgE,GAArDC,KAAK,UAAW,QAAO,EAAAC,a,0BAAa,iBAAK,C,0BACpD,eAA2D,G,WAAxC,EAAAC,M,qDAAA,EAAAA,MAAK,IAAEC,MAAA,iB,yCCCnB,iBAAgB,CAC3BC,KAAM,SACNC,MAF2B,WAGvB,gBAAU,eACV,IAAMH,EAAQ,eAAI,IAElB,gBAAc,eAEd,IAAMD,EAAc,aAEpB,MAAO,CACHC,QACAD,kBCbZ,EAAOK,OAASA,EAED,gB,kCCLA,SAASC,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCCFxB,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAInC,SAASO,EAAad,EAAae,EAAYC,GAG5D,OAFID,GAAYb,EAAkBF,EAAYiB,UAAWF,GACrDC,GAAad,EAAkBF,EAAagB,GACzChB,E,wECNH,E,WAGF,WAAYkB,GAAuB,UAC/BC,KAAKC,QAAUF,E,iCAGZ,SAAQL,GACX,OAAOQ,KAAKC,MAAMH,KAAKC,QAAQG,QAAQV,M,qBAGpC,SAAQA,EAAaW,GACxBL,KAAKC,QAAQK,QAAQZ,EAAKQ,KAAKK,UAAUF,M,wBAGtC,SAAWX,GACdM,KAAKC,QAAQO,WAAWd,O,KAInBe,EAAU,IAAI,EAAaC,gBAC3B,EAAW,IAAI,EAAaC,e,oCC5BzC,gBAGMC,EAAU,iBAED,QACXC,MAAOD,EAAQE,KACfC,IAAKH,EAAQI,GACbC,KAAML,EAAQM,M,gLCUZ,SAAUC,EAAqBC,GACjC,IAAMC,EAAW,eAAOD,EAAQf,OAkChC,OAhCA,iBACI,kBAAMgB,EAAShB,SACf,SAACA,GACQe,EAAQE,UACT,OAAOT,MAAeO,EAAQ5C,KAAM6B,GAChCe,EAAQnB,SAA+B,YAApBmB,EAAQnB,QAC3B,OAAQK,QAAQc,EAAQ5C,KAAM6B,GAE9B,OAASC,QAAQc,EAAQ5C,KAAM6B,MAI3C,CAEIkB,KAAM,eAASH,EAAQf,SAI/B,gBAAc,WACV,IAAImB,EAEAA,EADAJ,EAAQnB,SAA+B,YAApBmB,EAAQnB,QACX,OAAQG,QAAQgB,EAAQ5C,MAExB,OAAS4B,QAAQgB,EAAQ5C,MAE3B,OAAlBgD,IAA2BH,EAAShB,MAAQmB,GAC5CJ,EAAQE,UACgB,IAApBF,EAAQE,SACR,OAAOP,IAAIK,EAAQ5C,MAAM,SAAC6B,GACtBgB,EAAShB,MAAQA,QAGtBgB,EAOL,SAAUI,EAAcpB,GAC1B,IAAMqB,EAAQ,iBAEd,SAASC,IACL,OAAOZ,IAAI,cAAeV,GAE9B,gBAAY,WACJqB,EAAME,KAAKC,WACXF,OAGR,gBAAc,WACV,OAAOV,KAAK,cAAeZ,MAE/B,gBAAc,WACLqB,EAAME,KAAKC,WACZF,OAGR,gBAAY,WACR,OAAOV,KAAK,cAAeZ,Q,wJC3EtByB,EAAU,uFAEVC,EAAW,8CAIXC,EAAY,SAACC,GAAD,OAAiBH,EAAQI,KAAKD,IAC1CE,EAAa,SAACF,GAAD,OAAiBF,EAASG,KAAKD,IAO5CG,EAAW,SAAC/B,GAAD,MAA0D,oBAA1Cb,OAAOM,UAAUuC,SAASC,KAAKjC","file":"js/chunk-5230a07e.5e14c1d7.js","sourcesContent":["<template>\r\n    <div class=\"system\">\r\n        <el-button type=\"primary\" @click=\"clickHandle\">click</el-button>\r\n        <el-input v-model=\"input\" style=\"width: 300px;\"></el-input>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, ref } from \"vue\";\r\nimport { usePageUpdate } from \"@/hooks\";\r\n\r\nexport default defineComponent({\r\n    name: \"System\",\r\n    setup() {\r\n        onMounted(() => {});\r\n        const input = ref(\"\");\r\n\r\n        usePageUpdate(() => {});\r\n\r\n        const clickHandle = () => {};\r\n\r\n        return {\r\n            input,\r\n            clickHandle,\r\n        };\r\n    },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","\r\nimport { defineComponent, onMounted, ref } from \"vue\";\r\nimport { usePageUpdate } from \"@/hooks\";\r\n\r\nexport default defineComponent({\r\n    name: \"System\",\r\n    setup() {\r\n        onMounted(() => {});\r\n        const input = ref(\"\");\r\n\r\n        usePageUpdate(() => {});\r\n\r\n        const clickHandle = () => {};\r\n\r\n        return {\r\n            input,\r\n            clickHandle,\r\n        };\r\n    },\r\n});\r\n","import { render } from \"./system.vue?vue&type=template&id=2cf1b62b\"\nimport script from \"./system.vue?vue&type=script&lang=ts\"\nexport * from \"./system.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export interface StorageApi {\r\n    getItem: (key: string) => any;\r\n    setItem: (key: string, value: any) => void;\r\n    removeItem: (key: string) => void;\r\n}\r\nexport type SessionWay = \"session\" | \"location\";\r\n\r\nclass StorageProxy implements StorageApi {\r\n    protected storage: StorageApi;\r\n\r\n    constructor(storageType: StorageApi) {\r\n        this.storage = storageType;\r\n    }\r\n\r\n    public getItem(key: string) {\r\n        return JSON.parse(this.storage.getItem(key));\r\n    }\r\n\r\n    public setItem(key: string, value: any) {\r\n        this.storage.setItem(key, JSON.stringify(value));\r\n    }\r\n\r\n    public removeItem(key: string) {\r\n        this.storage.removeItem(key);\r\n    }\r\n}\r\n\r\nexport const session = new StorageProxy(sessionStorage);\r\nexport const location = new StorageProxy(localStorage);\r\n\r\n/**\r\n * 设置storage\r\n * @param {String} key\r\n * @param {Any}    value\r\n * @param {String} way  \"session\" | \"location\"\r\n * { key, value, way = \"session\" }: StorageOptions\r\n */\r\nexport const setStorage = (key: string, value: any, way: SessionWay = \"session\") => {\r\n    if (key && value) window[way].setItem(key, JSON.stringify(value));\r\n};\r\n\r\n/**\r\n * 获取storage\r\n * @param {String} key\r\n * @param {String} way  \"session\" | \"location\"\r\n * @returns {Any}\r\n */\r\nexport const getStorage = (key: string, way: SessionWay = \"session\") => {\r\n    if (key) return JSON.parse(window[way].getItem(key));\r\n    return null;\r\n};\r\n\r\n/**\r\n * 移除storage\r\n * @param {String} key\r\n * @param {String} way  \"session\" | \"location\"\r\n */\r\nexport const removeStorage = (key: string, way: SessionWay = \"session\") => {\r\n    if (key) window[way].removeItem(key);\r\n};\r\n","//  Event bus\r\nimport mitt from \"mitt\";\r\n\r\nconst emitter = mitt();\r\n\r\nexport default {\r\n    $emit: emitter.emit,\r\n    $on: emitter.on,\r\n    $off: emitter.off,\r\n};\r\n","import { ref, Ref, onBeforeMount, watch, onUnmounted, onActivated, onDeactivated } from \"vue\";\r\nimport { location, session } from \"@/util/storage\";\r\nimport mitter from \"@/plugins/mitt\";\r\nimport { isObject } from \"@/util/validata\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nexport interface UseLocationOptions<T> {\r\n    name: string;\r\n    value: T;\r\n    isWatch?: boolean;\r\n    storage?: \"session\" | \"location\";\r\n}\r\n\r\n/**\r\n * useLocation\r\n * @param options\r\n * @returns\r\n */\r\nexport function useLocation<T = any>(options: UseLocationOptions<T>): Ref<T> {\r\n    const refValue = ref<T>(options.value) as Ref<T>;\r\n\r\n    watch(\r\n        () => refValue.value,\r\n        (value) => {\r\n            if (!options.isWatch) {\r\n                mitter.$emit<boolean>(options.name, value as any);\r\n                if (options.storage && options.storage === \"session\") {\r\n                    session.setItem(options.name, value);\r\n                } else {\r\n                    location.setItem(options.name, value);\r\n                }\r\n            }\r\n        },\r\n        {\r\n            // deep: typeof options.value === \"object\",\r\n            deep: isObject(options.value),\r\n        }\r\n    );\r\n\r\n    onBeforeMount(() => {\r\n        let locationValue: T;\r\n        if (options.storage && options.storage === \"session\") {\r\n            locationValue = session.getItem(options.name);\r\n        } else {\r\n            locationValue = location.getItem(options.name);\r\n        }\r\n        locationValue !== null && (refValue.value = locationValue);\r\n        options.isWatch &&\r\n            options.isWatch === true &&\r\n            mitter.$on(options.name, (value) => {\r\n                refValue.value = value;\r\n            });\r\n    });\r\n    return refValue;\r\n}\r\n\r\n/**\r\n * this function will exec when you click tabs refresh button\r\n * @param value\r\n */\r\nexport function usePageUpdate(value: () => void) {\r\n    const route = useRoute();\r\n\r\n    function watchUpdate() {\r\n        mitter.$on(\"update-page\", value);\r\n    }\r\n    onActivated(() => {\r\n        if (route.meta.keepAlive) {\r\n            watchUpdate();\r\n        }\r\n    });\r\n    onDeactivated(() => {\r\n        mitter.$off(\"update-page\", value);\r\n    });\r\n    onBeforeMount(() => {\r\n        if (!route.meta.keepAlive) {\r\n            watchUpdate();\r\n        }\r\n    });\r\n    onUnmounted(() => {\r\n        mitter.$off(\"update-page\", value);\r\n    });\r\n}\r\n","// 手机号正则验证\r\nexport const mobileReg = /^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\\d{8}$/;\r\n// 身份证正则验证\r\nexport const idCardReg = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/;\r\n// 超链接正则验证\r\nexport const linkReg = /^https?:\\/\\/(([a-zA-Z0-9_-])+(\\.)?)*(:\\d+)?(\\/((\\.)?(\\?)?=?&?[a-zA-Z0-9_-](\\?)?)*)*$/;\r\n// email正则验证\r\nexport const emailReg = /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/;\r\n\r\nexport const checkMobile = (val: string) => mobileReg.test(val);\r\nexport const checkIdCard = (val: string) => idCardReg.test(val);\r\nexport const checkLink = (val: string) => linkReg.test(val);\r\nexport const checkEmail = (val: string) => emailReg.test(val);\r\n\r\n/**\r\n * isObject\r\n * @param value\r\n * @returns\r\n */\r\nexport const isObject = (value: any) => Object.prototype.toString.call(value) === \"[object Object]\";\r\n\r\n/**\r\n * isString\r\n * @param value\r\n * @returns\r\n */\r\nexport const isString = (value: any) => Object.prototype.toString.call(value) === \"[object String]\";\r\n\r\n/**\r\n * isNumber\r\n * @param value\r\n * @returns\r\n */\r\nexport const isNumber = (value: any) => Object.prototype.toString.call(value) === \"[object Number]\";\r\n\r\n/**\r\n * isArray\r\n * @param value\r\n * @returns\r\n */\r\nexport const isArray = (value: any) => Object.prototype.toString.call(value) === \"[object Array]\";\r\n"],"sourceRoot":""}